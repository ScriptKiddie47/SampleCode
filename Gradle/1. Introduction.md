# Gradle

1. Build Tool & Dependency Manager
2. DSL - Domain Specific Langauge - Groovy 
3. Eclipse Buildship Plugin is used in this tutorial

## Lets get started 

1. Create a simple project ( NOT JAVA ) in Eclipse
2. Create a file - `simple-project-1/build.gradle`
```groovy
task('hello').doLast{
	println "Hello World"
}
```

3. Lets try to run it using gradle buildship.
4. Eclipse -> Window -> Show View -> Other -> Search and select 'Gradle Tasks'
5. Now we need to add the gradle nature to the project.
Right Click on the project -> Configure -> Add Gradle Nature. We notice gradle icon appearing on the project.

    ![plot](Images/Image1_Gradle.png)
    ![plot](Images/Image2_Gradle.png)

6. Cool. Now lets Right Click on the project -> Run as -> Run Configuration -> Create a new config for gradle task -> Use the below image to create a config

    ![plot](Images/Image3_Gradle.png)

7.  Hit Apply and Run. In the console we see 

    ```bash
    Working Directory: /home/syndicate/Documents/CodeSource/eclipse-workspace/sample-project-1
    Gradle user home: /home/syndicate/.gradle
    Gradle Distribution: Gradle wrapper from target build
    Gradle Version: 8.1.1
    Java Home: /usr/lib/jvm/jdk-17.0.2
    JVM Arguments: None
    Program Arguments: None
    Build Scans Enabled: false
    Offline Mode Enabled: false
    Gradle Tasks: hello


    > Task :hello
    Hello World

    BUILD SUCCESSFUL in 115ms
    1 actionable task: 1 executed
    ```

8. Note : If the project doesn't appear on the 'Gradle Tasks' , we can delete it from eclipse ( not the source ) and import it as a gradle project.
    
     ![plot](Images/Image4_Gradle.png)

9. Cool , now lets run it from the 'Gradle Task'. Right click and we see 'run default gradle task'. Lets run it.

    ```bash
    Working Directory: /home/syndicate/Documents/CodeSource/.
    .
    .

    > Task :help

    Welcome to Gradle 8.1.1.
    .
    .
    BUILD SUCCESSFUL in 28ms
    1 actionable task: 1 executed

    ```
10. Interesting we see a entirely different thing. We don't see our hello task fired.
11. Its because gradle needs to know the default tasks it need to run. We can do this instead 

```groovy
defaultTasks 'hello'
task('hello').doLast{
	println "Hello World"
}
```
12. If we run the default tasks from Gradle task. We see hello back on. :smiley: 

14.

## Groovy - Java Connection

1. File - sample-project-1/build.gradle

```groovy
import java.text.*

println "Hello World"
System.out.println "Hello World Java"

SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'")
sdf.setTimeZone(TimeZone.getTimeZone("UTC"))
System.out.println "Hello World DateTime : " + sdf.format(new Date())

System.out.println "Date : " + new Date()
System.out.println "Date : " + LocalDate.now()

sayHelloSyndicate() // Method called before creation
void sayHelloSyndicate(){
	println "Hello Syndicate"
}

int doubleIt(int i){
	println "Method doubleIt Input : " + i
	i * 3;
}
print "Method doubleIt Invoked : " + doubleIt(2)
```
2. Lets run it using default gradle configuration or using the gradle task. We see in Output
```
....
> Configure project :
Hello World
Hello World Java
Hello World DateTime : 2024-01-12T07:43:42Z
Date : Fri Jan 12 13:13:42 IST 2024
Date : 2024-01-12
Hello Syndicate
Method doubleIt Input : 2
Method doubleIt Invoked : 6
```

3. So we can comment that we can write java syntax in groovy in most cases.
4. Gradle analyses the whole build script before executing it. So we can call the function before it was coded.
5. In groovy the return statement is optional, if there is more than one line in a method the last time auto-returns

6. Taking the groovy scripting a little forward with the below example.  Notice the returned value.

    ```groovy
    int doubleIt(int i){
        println "Method doubleIt Input : " + i
        i * 3;
        def y = i; // value of 'y' is auto-returned here
    }
    print "Method doubleIt Invoked : " + doubleIt(2)
    ```

    Ouput:
    ```
    > Configure project :
    Method doubleIt Input : 2
    Method doubleIt Invoked : 2
    ```
## Types in Groovy

1. Keyword `def` is used to indentify untyped variable.
2. `def` is like Object is Java :coffee:.
3. 