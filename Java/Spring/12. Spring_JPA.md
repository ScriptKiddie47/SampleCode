# SPRING JPA - Make JPA even more simple

### Dependency 
```groovy
implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
```

The table used here is defined in 10. Spring_JDBC.md

## NOTE : WHEN WE DEFINE THE SCHEMA USING THE BELOW ENTITY CLASS INSTEAD OF A SCHEMA SQL FILE, THE COLUMN ORDER IS NOT GARUNTEEED.

1. Lets create an @Entity POJO class

	```java
	import jakarta.persistence.Entity;
	import jakarta.persistence.Id;

	@Entity
	public class Course {

		@Id
		//If we want the JPA to generate this we can keep @GeneratedValue
		private long id;
		//@Column(name="xyz_name")  We can put mapping in here if we had different names, in this case it not mandatory but just keeping it
		private String name;
		private String author;
	    //Getters Setters Constructors
	```

2. Lets Create the Repo and we see no need to talk to JPA Entity manager

    ```java
    import org.springframework.data.jpa.repository.JpaRepository;
    public interface SpringDataJPARepo extends JpaRepository<Course, Long> {}
    ```
3. Lets update the Command line Runner
    ```java
    @Component
    public class CourseCommandLineRunner implements CommandLineRunner {

    	@Autowired
    	private CourseSpringDataJPARepo repository;

    	@Override
    	public void run(String... args) throws Exception {
    		repository.save(new Course(1, "Learn AWS", "Syndicate"));
    		repository.save(new Course(2, "Learn Google", "Syndicate"));
    		repository.save(new Course(3, "Learn Azure", "Syndicate"));

    		repository.deleteById(2l);

    		System.out.println(repository.findById(1l)); // Optional[Course [id=1, name=Learn AWS, author=Syndicate]]
    		System.out.println(repository.findById(3l)); // Optional[Course [id=3, name=Learn Azure, author=Syndicate]]
    	}
    }
    ```
4. Now Lets play with Custom SQL Function we can create in Spring Data JPA. SpringDataJPARepo Interface
	```java
	public interface CourseSpringDataJPARepo extends JpaRepository<Course, Long> {
		List<Course> findByAuthor(String author);
	}
	```
5. Lets invoke it : 
	```java
	System.out.println(repository.findByAuthor("Syndicate")); //[Course [id=1, name=Learn AWS, author=Syndicate], Course [id=3, name=Learn Azure, author=Syndicate]]
	```
6. Without writting a single SQL we were able to do a custom operation.